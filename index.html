    <!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Quiz App</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style id="app-style">
        :root {
        --color-purple: #a729f5;
        --color-navy: #313e51;
        --color-navy-light: #3b4d66;
        --color-light-blue: #f4f6fa;
        --color-light-gray: #abc1e1;
        --color-green: #26d782;
        --color-red: #ee5454;
        }

        body {
        font-family: 'Rubik', sans-serif;
        background-color: var(--color-light-blue);
        transition: background-color 0.3s ease;
        }

        body.dark-mode {
        background-color: var(--color-navy);
        color: white;
        }

        .quiz-container {
        max-width: 800px;
        min-height: 100vh;
        padding: 2rem;
        }

        .theme-toggle {
        cursor: pointer;
        }

        .app-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        }

        .category-icon {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-right: 1rem;
        }
        
        .html-icon { background-color: #FF7E35; }
        .css-icon { background-color: #2FD0ED; }
        .js-icon { background-color: #EACD31; }
        .accessibility-icon { background-color: #6BDDAD; }

        .quiz-card {
        border-radius: 16px;
        background-color: white;
        padding: 2rem;
        box-shadow: 0 16px 40px rgba(143, 160, 193, 0.14);
        transition: all 0.3s ease;
        }

        .dark-mode .quiz-card {
        background-color: var(--color-navy-light);
        }

        .home-icon-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-top: 2rem;
        }

        .category-card {
        background-color: white;
        border-radius: 16px;
        padding: 1.5rem;
        display: flex;
        align-items: center;
        cursor: pointer;
        transition: transform 0.2s ease;
        box-shadow: 0 16px 40px rgba(143, 160, 193, 0.14);
        }

        .dark-mode .category-card {
        background-color: var(--color-navy-light);
        }

        .category-card:hover {
        transform: translateY(-5px);
        }

        .answer-option {
        display: flex;
        align-items: center;
        background-color: var(--color-light-blue);
        border-radius: 12px;
        padding: 1rem;
        margin-bottom: 1rem;
        cursor: pointer;
        transition: all 0.2s ease;
        border: 2px solid transparent;
        }

        .dark-mode .answer-option {
        background-color: var(--color-navy);
        }

        .answer-option:hover {
        border-color: var(--color-purple);
        }

        .answer-option.selected {
        border-color: var(--color-purple);
        background-color: rgba(167, 41, 245, 0.1);
        }

        .answer-option.correct {
        border-color: var(--color-green);
        background-color: rgba(38, 215, 130, 0.1);
        }

        .answer-option.incorrect {
        border-color: var(--color-red);
        background-color: rgba(238, 84, 84, 0.1);
        }

        .option-letter {
        width: 40px;
        height: 40px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1rem;
        font-weight: bold;
        color: var(--color-navy);
        background-color: var(--color-light-gray);
        }

        .dark-mode .option-letter {
        color: white;
        }

        .option-text {
        font-weight: 500;
        }

        .btn-purple {
        background-color: var(--color-purple);
        color: white;
        font-weight: 500;
        padding: 1rem 2rem;
        border-radius: 12px;
        transition: all 0.2s ease;
        }

        .btn-purple:hover:not(:disabled) {
        background-color: #8414d9;
        color: white;
        }

        .btn-purple:disabled {
        background-color: #888;
        cursor: not-allowed;
        }

        .progress-container {
        background-color: #d8e5fa;
        height: 8px;
        border-radius: 999px;
        margin: 2rem 0;
        }

        .dark-mode .progress-container {
        background-color: var(--color-navy);
        }

        .progress-bar {
        background-color: var(--color-purple);
        height: 100%;
        border-radius: 999px;
        width: 0;
        transition: width 0.3s ease;
        }

        .result-card {
        text-align: center;
        padding: 2rem;
        }

        .score-circle {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        background-color: rgba(167, 41, 245, 0.1);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin: 0 auto 2rem;
        }

        .score-number {
        font-size: 3.5rem;
        font-weight: bold;
        color: var(--color-purple);
        }

        .score-text {
        font-size: 1.2rem;
        }

        .result-list {
        text-align: left;
        }

        .result-item {
        margin-bottom: 1rem;
        border-radius: 12px;
        padding: 1rem;
        }

        .question-result-wrapper {
        display: flex;
        align-items: center;
        margin-bottom: 0.5rem;
        }

        .question-title {
        font-weight: 500;
        flex-grow: 1;
        }

        .badge-correct {
        background-color: var(--color-green);
        }

        .badge-incorrect {
        background-color: var(--color-red);
        }

        .fade-enter {
        opacity: 0;
        transform: translateY(20px);
        }

        .fade-enter-active {
        opacity: 1;
        transform: translateY(0);
        transition: opacity 0.5s, transform 0.5s;
        }

        .fade-exit {
        opacity: 1;
        transform: translateY(0);
        }

        .fade-exit-active {
        opacity: 0;
        transform: translateY(-20px);
        transition: opacity 0.5s, transform 0.5s;
        }

        /* Animations */
        @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
        }

        .animation-fade-in {
        animation: fadeIn 0.5s ease forwards;
        }

        .animation-pulse {
        animation: pulse 0.5s ease;
        }

        .screen {
        display: none;
        }

        .active-screen {
        display: block;
        animation: fadeIn 0.5s ease forwards;
        }
    </style>
    </head>
    <body>
    <div class="container quiz-container">
        <!-- Header with theme toggle -->
        <header class="app-header">
        <div class="d-flex align-items-center">
            <span id="category-icon" class="category-icon" style="display: none;"></span>
            <span id="category-text"></span>
        </div>
        <div class="theme-toggle d-flex align-items-center">
            <span id="theme-text">Light</span>
            <div class="form-check form-switch ms-2">
            <input class="form-check-input" type="checkbox" id="themeSwitch">
            </div>
            <i class="ms-2 fas fa-moon"></i>
        </div>
        </header>

        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active-screen">
        <div class="row align-items-center" style="min-height: 80vh;">
            <div class="col-lg-6">
            <h1 class="mb-4">Bienvenido al <span class="text-purple fw-bold">Quiz de Frontend</span></h1>
            <p class="text-muted mb-5">Pon a prueba tus conocimientos de frontend con nuestro cuestionario interactivo de HTML, CSS, JavaScript y Accesibilidad.</p>
            <p class="mb-3 fw-bold">Elige un tema para comenzar:</p>
            </div>
            <div class="col-lg-6">
            <div class="home-icon-container">
                <div class="category-card" data-category="html">
                <div class="category-icon html-icon">
                    <i class="fab fa-html5 fa-lg text-white"></i>
                </div>
                <span class="ms-3 fw-bold">HTML</span>
                </div>
                
                <div class="category-card" data-category="css">
                <div class="category-icon css-icon">
                    <i class="fab fa-css3-alt fa-lg text-white"></i>
                </div>
                <span class="ms-3 fw-bold">CSS</span>
                </div>
                
                <div class="category-card" data-category="javascript">
                <div class="category-icon js-icon">
                    <i class="fab fa-js fa-lg text-white"></i>
                </div>
                <span class="ms-3 fw-bold">JavaScript</span>
                </div>
                
                <div class="category-card" data-category="accessibility">
                <div class="category-icon accessibility-icon">
                    <i class="fas fa-universal-access fa-lg text-white"></i>
                </div>
                <span class="ms-3 fw-bold">Accesibilidad</span>
                </div>
            </div>
            </div>
        </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="screen">
        <div class="mb-4">
            <p class="text-muted">Pregunta <span id="current-question-num">1</span> de 10</p>
            <h2 id="question-text" class="mb-4">Pregunta va aquí?</h2>
        </div>

        <div class="progress-container">
            <div id="progress-bar" class="progress-bar"></div>
        </div>

        <div class="quiz-card">
            <div id="answers-container" class="mb-4">
            <!-- Answer options will be generated here -->
            </div>
            
            <div class="text-end">
            <button id="next-btn" class="btn btn-purple" disabled>Siguiente Pregunta</button>
            </div>
        </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen">
        <div class="quiz-card result-card">
            <h2 class="mb-4">¡Cuestionario completado!</h2>
            
            <div class="score-circle">
            <div class="score-number" id="score-value">0</div>
            <div class="score-text">de 10</div>
            </div>
            
            <h3 class="mb-4">Tus Resultados</h3>
            
            <div class="result-list" id="results-container">
            <!-- Results will be generated here -->
            </div>
            
            <div class="d-flex justify-content-center gap-3 mt-4">
            <button id="restart-btn" class="btn btn-purple animation-fade-in">
                Jugar de Nuevo
            </button>
            
            <!-- New: Volver al Inicio -->
            <button id="home-btn" class="btn btn-purple animation-fade-in" style="animation-delay:0.2s;">
                Volver al Inicio
            </button>
            </div>
        </div>
        </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script id="app-script">
        // Quiz Data for all categories
        const quizData = {
        html: [
            {
            question: "¿Qué significa HTML?",
            options: [
                "Lenguaje de Marcado de Hipertexto",
                "Lenguaje de Programación Multiplataforma",
                "Lenguaje de Transferencia de Marcado",
                "Lenguaje de Programación Múltiple Multiplataforma"
            ],
            correctAnswer: 0
            },
            {
            question: "¿Cuál es el elemento HTML utilizado para crear una lista desplegable?",
            options: [
                "Input",
                "dropdown",
                "select",
                "list"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Cuál es el elemento HTML correcto para insertar un salto de línea?",
            options: [
                "lb",
                "newline",
                "break",
                "br"
            ],
            correctAnswer: 3
            },
            {
            question: "¿Cuál es el atributo HTML utilizado para definir estilos en línea?",
            options: [
                "class",
                "styles",
                "style",
                "font"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Cuál es el elemento HTML utilizado para crear un hipervínculo?",
            options: [
                "link",
                "a",
                "href",
                "hyperlink"
            ],
            correctAnswer: 1
            },
            {
            question: "¿Cuál es el elemento HTML utilizado para definir una tabla?",
            options: [
                "table",
                "tab",
                "grid",
                "tbl"
            ],
            correctAnswer: 0
            },
            {
            question: "¿Cuál es la sintaxis HTML correcta para crear un checkbox?",
            options: [
                "check",
                "input type='check'",
                "checkbox",
                "input type='checkbox'"
            ],
            correctAnswer: 3
            },
            {
            question: "¿Cuál es el atributo HTML utilizado para proporcionar texto alternativo para imágenes para lectores de pantalla?",
            options: [
                "alt",
                "title",
                "description",
                "src"
            ],
            correctAnswer: 0
            },
            {
            question: "¿Cuál es la sintaxis HTML correcta para crear un área de texto?",
            options: [
                "input type='textarea'",
                "input type='textbox'",
                "textarea",
                "textfield"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Cuál es la sintaxis HTML correcta para insertar una imagen de fondo?",
            options: [
                "background img='image.jpg'",
                "body background='image.jpg'",
                "div background='image.jpg'",
                "img background='image.jpg'"
            ],
            correctAnswer: 1
            }
        ],
        css: [
            {
            question: "¿Qué significa CSS?",
            options: [
                "Estilos Creativos de Marcado",
                "Estilos de Computadora de Marcado",
                "Estilos Cascadientes de Marcado",
                "Estilos Colores de Marcado"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Cuál es la propiedad utilizada para cambiar el color de fondo?",
            options: [
                "color",
                "bgcolor",
                "background-color",
                "background"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Cómo se selecciona un elemento con el id 'demo'?",
            options: [
                "#demo",
                ".demo",
                "demo",
                "*demo"
            ],
            correctAnswer: 0
            },
            {
            question: "¿Cómo se seleccionan elementos con el nombre de clase 'test'?",
            options: [
                "#test",
                "test",
                ".test",
                "*test"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Cuál es la propiedad CSS utilizada para controlar el tamaño del texto?",
            options: [
                "text-size",
                "font-style",
                "text-style",
                "font-size"
            ],
            correctAnswer: 3
            },
            {
            question: "¿Cuál es la sintaxis CSS correcta para hacer que todos los elementos <p> estén en negrita?",
            options: [
                "p { font-weight: bold; }",
                "p { text-size: bold; }",
                "<p style='font-size: bold;'>",
                "p { text: bold; }"
            ],
            correctAnswer: 0
            },
            {
            question: "¿Cómo se muestra un borde como esto: 'solid 1px black'?",
            options: [
                "border: 1px black solid;",
                "border: solid 1px black;",
                "border: black 1px solid;",
                "All of the above"
            ],
            correctAnswer: 3
            },
            {
            question: "¿Cómo se hace para que cada palabra en un texto comience con mayúscula?",
            options: [
                "text-transform: capitalize;",
                "text-transform: uppercase;",
                "text-style: capital;",
                "You can't do that with CSS"
            ],
            correctAnswer: 0
            },
            {
            question: "¿Cuál es la propiedad CSS utilizada para cambiar la fuente de un elemento?",
            options: [
                "font-family",
                "font-style",
                "font-weight",
                "font-text"
            ],
            correctAnswer: 0
            },
            {
            question: "¿Cómo se hace para quitar los puntos de lista?",
            options: [
                "list-style-type: no-bullet;",
                "list-style: none;",
                "list: none;",
                "bullets: none;"
            ],
            correctAnswer: 1
            }
        ],
        javascript: [
            {
            question: "¿Dentro de qué elemento HTML se debe insertar el JavaScript?",
            options: [
                "javascrip",
                "scripting",
                "js",
                "script"
            ],
            correctAnswer: 3
            },
            {
            question: "¿Dónde se debe insertar el JavaScript?",
            options: [
                "La sección <head>",
                "La sección <body>",
                "Ambas secciones <head> y <body> son correctas",
                "La sección <meta>"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Cómo se crea una función en JavaScript?",
            options: [
                "function = myFunction()",
                "function myFunction()",
                "function:myFunction()",
                "create myFunction()"
            ],
            correctAnswer: 1
            },
            {
            question: "¿Cómo se llama a una función llamada 'myFunction'?",
            options: [
                "call myFunction()",
                "myFunction()",
                "call function myFunction()",
                "execute myFunction()"
            ],
            correctAnswer: 1
            },
            {
            question: "¿Cómo se escribe una declaración IF en JavaScript?",
            options: [
                "if i = 5 then",
                "if i = 5",
                "if (i == 5)",
                "if i == 5 then"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Cómo se escribe una declaración IF para ejecutar cierto código si 'i' no es igual a 5?",
            options: [
                "if (i != 5)",
                "if i <> 5",
                "if i =! 5 then",
                "if (i <> 5)"
            ],
            correctAnswer: 0
            },
            {
            question: "¿Cómo se inicia un bucle WHILE?",
            options: [
                "while (i <= 10; i++)",
                "while i = 1 to 10",
                "while (i <= 10)",
                "while {i <= 10}"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Cómo se inicia un bucle FOR?",
            options: [
                "for (i = 0; i <= 5; i++)",
                "for i = 1 to 5",
                "for (i <= 5; i++)",
                "for (i = 0; i <= 5)"
            ],
            correctAnswer: 0
            },
            {
            question: "¿Cómo se añade un comentario en JavaScript?",
            options: [
                "// This is a comment",
                "' This is a comment",
                "# This is a comment",
                "&lt;!--This is a commet --&gt;"
            ],
            correctAnswer: 0
            },
            {
            question: "¿Cómo se escribe una matriz de JavaScript?",
            options: [
                "var colors = 'red', 'green', 'blue'",
                "var colors = (1:'red', 2:'green', 3:'blue')",
                "var colors = ['red', 'green', 'blue']",
                "var colors = 1 = ('red'), 2 = ('green'), 3 = ('blue')"
            ],
            correctAnswer: 2
            }
        ],
        accessibility: [
            {
            question: "¿Qué significa WCAG?",
            options: [
                "Guías de Accesibilidad de Contenido Web",
                "Guías de Conformidad de Accesibilidad",
                "Guías de Contenido Web de Accesibilidad",
                "Guías de Accesibilidad Adaptativa"
            ],
            correctAnswer: 0
            },
            {
            question: "¿Cuál es el atributo HTML utilizado para proporcionar texto alternativo para imágenes para lectores de pantalla?",
            options: [
                "title",
                "alt",
                "description",
                "caption"
            ],
            correctAnswer: 1
            },
            {
            question: "¿Cuál es el propósito de ARIA en desarrollo web?",
            options: [
                "Para hacer que las páginas web se vean mejor",
                "Para mejorar el rendimiento de las páginas web",
                "Para hacer que el contenido web sea más accesible a personas con discapacidades",
                "Para añadir animaciones a las páginas web"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Qué es el propósito del atributo 'tab index'?",
            options: [
                "Especifica el ancho del carácter de tabulación",
                "Controla el orden en el que se reciben los focos de teclado cuando el usuario navega con la tecla Tab",
                "Indica cuántos tabuladores debe contener un elemento",
                "Especifica el color de fondo de los tabuladores seleccionados"
            ],
            correctAnswer: 1
            },
            {
            question: "¿Qué combinación de colores típicamente proporciona la mejor contraste para la accesibilidad?",
            options: [
                "Texto amarillo sobre fondo blanco",
                "Texto azul sobre fondo rojo",
                "Texto negro sobre fondo blanco",
                "Texto gris claro sobre fondo blanco"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Cuál es el rango de contraste recomendado mínimo entre texto y fondo para la accesibilidad WCAG AA?",
            options: [
                "2:1",
                "3:1",
                "4.5:1",
                "7:1"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Qué se debe usar en lugar de 'Click aquí' para el texto de hipervínculo?",
            options: [
                "Usar un icono en su lugar",
                "Usar texto descriptivo que haga sentido fuera del contexto",
                "Mantenerlo corto, 'Click aquí' está bien",
                "Usar mayúsculas para enfatizar"
            ],
            correctAnswer: 1
            },
            {
            question: "¿Qué elemento HTML se debe usar para identificar el área de contenido principal para los lectores de pantalla?",
            options: [
                "content",
                "section",
                "main",
                "div class='main'"
            ],
            correctAnswer: 2
            },
            {
            question: "¿Cuál es el propósito de los enlaces 'salto de pantalla'?",
            options: [
                "Para ocultar la navegación en pantallas pequeñas",
                "Para permitir que los usuarios con teclado puedan saltar directamente al contenido principal",
                "Para eliminar la navegación para la impresión",
                "Para simplificar el sitio para los usuarios móviles"
            ],
            correctAnswer: 1
            },
            {
            question: "¿Cuál de las siguientes no es una de las principales principios de las gu��as WCAG?",
            options: [
                "Perceivable",
                "Operable",
                "Aesthetic",
                "Robust"
            ],
            correctAnswer: 2
            }
        ]
        };

        // DOM Elements
        const welcomeScreen = document.getElementById('welcome-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        const categoryCards = document.querySelectorAll('.category-card');
        const categoryIcon = document.getElementById('category-icon');
        const categoryText = document.getElementById('category-text');
        const questionText = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const nextBtn = document.getElementById('next-btn');
        const currentQuestionNum = document.getElementById('current-question-num');
        const progressBar = document.getElementById('progress-bar');
        const scoreValue = document.getElementById('score-value');
        const resultsContainer = document.getElementById('results-container');
        const restartBtn = document.getElementById('restart-btn');
        const homeBtn = document.getElementById('home-btn');
        const themeSwitch = document.getElementById('themeSwitch');
        const themeText = document.getElementById('theme-text');

        // Quiz State
        let currentCategory = '';
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let selectedAnswerIndex = -1;
        let userAnswers = [];
        let score = 0;

        // Initialize quiz from localStorage if available
        function initQuiz() {
        const savedQuiz = localStorage.getItem('quizState');
        if (savedQuiz) {
            const quizState = JSON.parse(savedQuiz);
            if (quizState.inProgress) {
            currentCategory = quizState.category;
            currentQuestions = quizData[currentCategory];
            currentQuestionIndex = quizState.questionIndex;
            userAnswers = quizState.userAnswers;
            
            startQuiz(currentCategory, quizState.questionIndex);
            }
        }

        // Check for saved theme preference
        const darkMode = localStorage.getItem('darkMode') === 'true';
        if (darkMode) {
            document.body.classList.add('dark-mode');
            themeSwitch.checked = true;
            themeText.textContent = 'Dark';
        }
        }

        // Function to start the quiz
        function startQuiz(category, startFromQuestion = 0) {
        currentCategory = category;
        currentQuestions = quizData[category];
        currentQuestionIndex = startFromQuestion;
        userAnswers = userAnswers.slice(0, startFromQuestion);
        score = userAnswers.filter((answer, index) => answer === currentQuestions[index].correctAnswer).length;

        // Update UI
        showScreen(quizScreen);
        displayCategoryInfo(category);
        loadQuestion();

        // Save quiz state
        saveQuizState();
        }

        // Function to display category information
        function displayCategoryInfo(category) {
        categoryIcon.style.display = 'inline-flex';
        
        // Set category icon and text
        categoryIcon.className = 'category-icon';
        
        switch(category) {
            case 'html':
            categoryIcon.classList.add('html-icon');
            categoryIcon.innerHTML = '<i class="fab fa-html5 fa-lg text-white"></i>';
            categoryText.textContent = 'HTML';
            break;
            case 'css':
            categoryIcon.classList.add('css-icon');
            categoryIcon.innerHTML = '<i class="fab fa-css3-alt fa-lg text-white"></i>';
            categoryText.textContent = 'CSS';
            break;
            case 'javascript':
            categoryIcon.classList.add('js-icon');
            categoryIcon.innerHTML = '<i class="fab fa-js fa-lg text-white"></i>';
            categoryText.textContent = 'JavaScript';
            break;
            case 'accessibility':
            categoryIcon.classList.add('accessibility-icon');
            categoryIcon.innerHTML = '<i class="fas fa-universal-access fa-lg text-white"></i>';
            categoryText.textContent = 'Accesibilidad';
            break;
        }
        }

        // Function to load a question
        function loadQuestion() {
        const question = currentQuestions[currentQuestionIndex];
        
        // Reset selected answer
        selectedAnswerIndex = -1;
        nextBtn.disabled = true;
        
        // Update question number
        currentQuestionNum.textContent = currentQuestionIndex + 1;
        
        // Update progress bar
        const progress = ((currentQuestionIndex) / currentQuestions.length) * 100;
        progressBar.style.width = `${progress}%`;
        
        // Set question text
        questionText.textContent = question.question;
        
        // Create answer options
        answersContainer.innerHTML = '';
        
        const letters = ['A', 'B', 'C', 'D'];
        
        question.options.forEach((option, index) => {
            const answerOption = document.createElement('div');
            answerOption.className = 'answer-option animation-fade-in';
            answerOption.style.animationDelay = `${index * 0.1}s`;
            answerOption.dataset.index = index;
            
            answerOption.innerHTML = `
            <div class="option-letter">${letters[index]}</div>
            <div class="option-text">${option}</div>
            `;
            
            answerOption.addEventListener('click', () => selectAnswer(index));
            answersContainer.appendChild(answerOption);
        });
        
        // Update button text for last question
        if (currentQuestionIndex === currentQuestions.length - 1) {
            nextBtn.textContent = 'Ver Resultados';
        } else {
            nextBtn.textContent = 'Siguiente Pregunta';
        }
        }

        // Function to select an answer
        function selectAnswer(index) {
        // Prevent multiple selections once answered
        if (nextBtn.disabled === false && ['html','css','javascript'].includes(currentCategory)) return;
        
        // Remove selected class from all options
        const options = document.querySelectorAll('.answer-option');
        options.forEach(option => option.classList.remove('selected'));
        
        // Add selected class to clicked option
        options[index].classList.add('selected');
        options[index].classList.add('animation-pulse');
        
        // Enable next button
        nextBtn.disabled = false;
        
        // Update selected answer index
        selectedAnswerIndex = index;
        
        // Immediate feedback for HTML, CSS, JavaScript
        if (['html','css','javascript'].includes(currentCategory)) {
            // Disable further clicks
            options.forEach(opt => {
            opt.style.pointerEvents = 'none';
            });
            
            const correctIndex = currentQuestions[currentQuestionIndex].correctAnswer;
            const isCorrect = (index === correctIndex);
            
            if (isCorrect) {
            // mark chosen as correct
            options[index].classList.add('correct');
            } else {
            // mark chosen as incorrect
            options[index].classList.add('incorrect');
            // highlight the correct one
            options[correctIndex].classList.add('correct');
            }
            
            // Enable next button now that feedback shown
            nextBtn.disabled = false;
            return;
        }
        
        // For Accessibility category - user must explicitly click next
        nextBtn.disabled = false;
        }

        // Function to handle next button click
        function handleNextButtonClick() {
        if (selectedAnswerIndex === -1) return;
        
        // Save user's answer
        userAnswers[currentQuestionIndex] = selectedAnswerIndex;
        
        // Check if answer is correct
        if (selectedAnswerIndex === currentQuestions[currentQuestionIndex].correctAnswer) {
            score++;
        }
        
        // Move to next question or show results
        if (currentQuestionIndex < currentQuestions.length - 1) {
            currentQuestionIndex++;
            loadQuestion();
        } else {
            showResults();
        }
        
        // Save quiz state
        saveQuizState();
        }

        // Function to save quiz state to localStorage
        function saveQuizState() {
        const quizState = {
            inProgress: currentQuestionIndex < currentQuestions.length,
            category: currentCategory,
            questionIndex: currentQuestionIndex,
            userAnswers: userAnswers
        };
        
        localStorage.setItem('quizState', JSON.stringify(quizState));
        }

        // Function to show results
        function showResults() {
        showScreen(resultsScreen);
        
        // Update score
        scoreValue.textContent = score;
        
        // Create results list
        resultsContainer.innerHTML = '';
        
        currentQuestions.forEach((question, index) => {
            const userAnswer = userAnswers[index];
            const correctAnswer = question.correctAnswer;
            const isCorrect = userAnswer === correctAnswer;
            
            const resultItem = document.createElement('div');
            resultItem.className = `result-item animation-fade-in ${isCorrect ? 'bg-success bg-opacity-10' : 'bg-danger bg-opacity-10'}`;
            resultItem.style.animationDelay = `${index * 0.1}s`;
            
            resultItem.innerHTML = `
            <div class="question-result-wrapper">
                <div class="question-title">${index + 1}. ${question.question}</div>
                <span class="badge ms-2 ${isCorrect ? 'badge-correct' : 'badge-incorrect'}">
                ${isCorrect ? 'Correcto' : 'Incorrecto'}
                </span>
            </div>
            <div class="user-answer ${isCorrect ? 'text-success' : 'text-danger'}">
                Tu respuesta: ${question.options[userAnswer]}
            </div>
            ${!isCorrect ? `<div class="correct-answer text-success mt-1">
                Respuesta correcta: ${question.options[correctAnswer]}
            </div>` : ''}
            `;
            
            resultsContainer.appendChild(resultItem);
        });
        
        // Clear saved quiz state
        localStorage.removeItem('quizState');
        }

        // Function to restart the quiz
        function restartQuiz() {
        currentQuestionIndex = 0;
        selectedAnswerIndex = -1;
        userAnswers = [];
        score = 0;
        
        showScreen(welcomeScreen);
        
        // Hide category icon
        categoryIcon.style.display = 'none';
        categoryText.textContent = '';
        
        // Clear saved quiz state
        localStorage.removeItem('quizState');
        }

        // Function to switch between screens
        function showScreen(screen) {
        // Hide all screens
        welcomeScreen.classList.remove('active-screen');
        quizScreen.classList.remove('active-screen');
        resultsScreen.classList.remove('active-screen');
        
        // Show selected screen
        screen.classList.add('active-screen');
        }

        // Toggle theme between light and dark
        function toggleTheme() {
        document.body.classList.toggle('dark-mode');
        const isDarkMode = document.body.classList.contains('dark-mode');
        themeText.textContent = isDarkMode ? 'Dark' : 'Light';
        
        // Save theme preference
        localStorage.setItem('darkMode', isDarkMode);
        }

        // Event Listeners
        categoryCards.forEach(card => {
        card.addEventListener('click', () => {
            startQuiz(card.dataset.category);
        });
        });

        nextBtn.addEventListener('click', handleNextButtonClick);
        restartBtn.addEventListener('click', restartQuiz);
        homeBtn.addEventListener('click', restartQuiz);
        themeSwitch.addEventListener('change', toggleTheme);

        // Initialize the quiz
        initQuiz();
    </script>
    </body>
    </html>